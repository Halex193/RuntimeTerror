CREATE TABLE IF NOT EXISTS conference (`name` VARCHAR(100) NOT NULL, startdate DATETIME NOT NULL, enddate DATETIME NOT NULL, abstractdeadline DATETIME NOT NULL, proposaldeadline DATETIME NOT NULL, biddingdeadline DATETIME NOT NULL, submitpaperearly BOOLEAN NOT NULL);
CREATE TABLE IF NOT EXISTS users (pk_userid INT AUTO_INCREMENT PRIMARY KEY, `name` VARCHAR(50) NOT NULL, username VARCHAR(10) NOT NULL, password VARCHAR(10) NOT NULL, accesslevel INT NOT NULL, sessionid INT NOT NULL, affiliation VARCHAR(50) NOT NULL, email VARCHAR(50) NOT NULL, hasticket BOOLEAN NOT NULL);
ALTER TABLE users ADD CONSTRAINT users_sessionid_unique UNIQUE (sessionid);
CREATE TABLE IF NOT EXISTS papers (pk_paperid INT AUTO_INCREMENT PRIMARY KEY, fk_userid INT NOT NULL, field VARCHAR(100) NOT NULL, documentpath VARCHAR(100) NOT NULL, conflicting BOOLEAN NOT NULL, proposalname VARCHAR(100) NOT NULL, keywords VARCHAR(100) NOT NULL, topics VARCHAR(100) NOT NULL, listofauthors VARCHAR(100) NOT NULL, accepted BOOLEAN NOT NULL, CONSTRAINT fk_papers_fk_userid_pk_userid FOREIGN KEY (fk_userid) REFERENCES users(pk_userid) ON DELETE RESTRICT ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS bidpapers (fk_userid INT, fk_paperid INT, reviewchoice INT NOT NULL, CONSTRAINT PK_BidPaper PRIMARY KEY (fk_userid, fk_paperid), CONSTRAINT fk_bidpapers_fk_userid_pk_userid FOREIGN KEY (fk_userid) REFERENCES users(pk_userid) ON DELETE RESTRICT ON UPDATE RESTRICT, CONSTRAINT fk_bidpapers_fk_paperid_pk_paperid FOREIGN KEY (fk_paperid) REFERENCES papers(pk_paperid) ON DELETE RESTRICT ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS reviews (fk_userid INT, fk_paperid INT, content VARCHAR(5000) NOT NULL, score INT NOT NULL, CONSTRAINT PK_Review PRIMARY KEY (fk_userid, fk_paperid), CONSTRAINT fk_reviews_fk_userid_pk_userid FOREIGN KEY (fk_userid) REFERENCES users(pk_userid) ON DELETE RESTRICT ON UPDATE RESTRICT, CONSTRAINT fk_reviews_fk_paperid_pk_paperid FOREIGN KEY (fk_paperid) REFERENCES papers(pk_paperid) ON DELETE RESTRICT ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS sections (pk_sectionid INT AUTO_INCREMENT PRIMARY KEY, fk_sessionchair INT NULL, `name` VARCHAR(100) NOT NULL, description VARCHAR(500) NOT NULL, starttime DATETIME NOT NULL, endtime DATETIME NOT NULL, documentpath VARCHAR(100) NOT NULL, roomname VARCHAR(100) NOT NULL, CONSTRAINT fk_sections_fk_sessionchair_pk_userid FOREIGN KEY (fk_sessionchair) REFERENCES users(pk_userid) ON DELETE RESTRICT ON UPDATE RESTRICT);
CREATE TABLE IF NOT EXISTS usersectionchoices (fk_sectionid INT, fk_userid INT, CONSTRAINT PK_UserSectionChoice PRIMARY KEY (fk_sectionid, fk_userid), CONSTRAINT fk_usersectionchoices_fk_sectionid_pk_sectionid FOREIGN KEY (fk_sectionid) REFERENCES sections(pk_sectionid) ON DELETE RESTRICT ON UPDATE RESTRICT, CONSTRAINT fk_usersectionchoices_fk_userid_pk_userid FOREIGN KEY (fk_userid) REFERENCES users(pk_userid) ON DELETE RESTRICT ON UPDATE RESTRICT);
